package cux.oracle.apps.po.deliver.server;

import cux.oracle.apps.po.deliver.lov.server.CuxDeliverStatusLovVOImpl;

import java.sql.CallableStatement;
import java.sql.Types;

import oracle.apps.fnd.framework.server.OAApplicationModuleImpl;
import oracle.apps.fnd.framework.server.OADBTransaction;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class CuxDeliverAMImpl extends OAApplicationModuleImpl {
    /**This is the default constructor (do not remove)
     */
    public CuxDeliverAMImpl() {
    }

    /**Sample main for debugging Business Components code using the tester.
     */
    public static void main(String[] args) { /* package name */
        /* Configuration Name */launchTester("cux.oracle.apps.po.deliver.server", 
                                             "CuxDeliverAMLocal");
    }

    /**Container's getter for CuxPoDeliStatusTVO1
     */
    public CuxPoDeliStatusTVOImpl getCuxPoDeliStatusTVO1() {
        return (CuxPoDeliStatusTVOImpl)findViewObject("CuxPoDeliStatusTVO1");
    }

    /**Container's getter for CuxPoDeliStatusTVO2
     */
    public CuxPoDeliStatusTVOImpl getCuxPoDeliStatusTVO2() {
        return (CuxPoDeliStatusTVOImpl)findViewObject("CuxPoDeliStatusTVO2");
    }

    /**Container's getter for CuxPoDeliDisVO1
     */
    public CuxPoDeliDisVOImpl getCuxPoDeliDisVO1() {
        return (CuxPoDeliDisVOImpl)findViewObject("CuxPoDeliDisVO1");
    }

    /**
     * 
     * @param poHeaderId
     */
    public void initDeliverStatus(String poHeaderId) {
        CuxPoDeliDisVOImpl disVO = this.getCuxPoDeliDisVO1();
        disVO.setWhereClauseParams(null);
        disVO.setWhereClauseParams(new Object[] { poHeaderId });
        disVO.executeQuery();

        CuxPoDeliStatusTVOImpl vo = this.getCuxPoDeliStatusTVO1();
        vo.queryByPoHeaderId(poHeaderId);

        CuxPoSupEvlTVOImpl evlVo = this.getCuxPoSupEvlTVO1();
        evlVo.queryByPoHeaderId(poHeaderId);
        if (vo.getRowCount() == 0) {
            OADBTransaction transaction = this.getOADBTransaction();
            CallableStatement cs = 
                transaction.createCallableStatement("begin cux_po_deliver_pkg.init_create_deliver(:1); end;", 
                                                    1);
            try {
                cs.setString(1, poHeaderId);
                cs.executeQuery();
                //System.out.println("first="+result);
            } catch (Exception e) {
                System.out.println(e.toString());
            }
            if (cs != null) {
                try {
                    cs.close();
                } catch (Exception e) {
                    System.out.println(e.toString());
                }
            }
            //System.out.println("result="+result);

            vo.queryByPoHeaderId(poHeaderId);
            evlVo.queryByPoHeaderId(poHeaderId);
        }

    }

    /**
     * 
     * @param deliId
     */
    public void initSingleDeliverStatus(String deliId) {
        CuxPoDeliStatusTVOImpl vo = this.getCuxPoDeliStatusTVO2();
        vo.queryByDeliId(deliId);

    }

    public void rollback() {
        this.getOADBTransaction().rollback();
    }

    public void commit() {
        this.getOADBTransaction().commit();
    }

    /**Container's getter for CuxDeliverStatusLovVO1
     */
    public CuxDeliverStatusLovVOImpl getCuxDeliverStatusLovVO1() {
        return (CuxDeliverStatusLovVOImpl)findViewObject("CuxDeliverStatusLovVO1");
    }

    /**Container's getter for CuxPoSupEvlTVO1
     */
    public CuxPoSupEvlTVOImpl getCuxPoSupEvlTVO1() {
        return (CuxPoSupEvlTVOImpl)findViewObject("CuxPoSupEvlTVO1");
    }

    /**Container's getter for CuxPoSupEvlConfVO1
     */
    public CuxPoSupEvlConfVOImpl getCuxPoSupEvlConfVO1() {
        return (CuxPoSupEvlConfVOImpl)findViewObject("CuxPoSupEvlConfVO1");
    }
}
