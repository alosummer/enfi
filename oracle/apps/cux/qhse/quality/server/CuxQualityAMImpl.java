package cux.oracle.apps.cux.qhse.quality.server;

import cux.oracle.apps.cux.qhse.rectify.server.CuxRectifyNotifyHeadersVOImpl;
import cux.oracle.apps.cux.qhse.rectify.server.CuxRectifyNotifyHeadersVORowImpl;
import cux.oracle.apps.cux.qhse.rectify.server.CuxRectifyNotifyLinesVOImpl;
import cux.oracle.apps.cux.qhse.rectify.server.CuxRectifyNotifyLinesVORowImpl;

import java.sql.CallableStatement;

import oracle.apps.fnd.framework.server.OAApplicationModuleImpl;

import oracle.apps.fnd.framework.server.OADBTransaction;

import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewLinkImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class CuxQualityAMImpl extends OAApplicationModuleImpl {
    /**This is the default constructor (do not remove)
     */
    public CuxQualityAMImpl() {
    }

    /**Sample main for debugging Business Components code using the tester.
     */
    public static void main(String[] args) { /* package name */
        /* Configuration Name */launchTester("cux.oracle.apps.cux.qhse.quality.server", 
                                             "CuxQualityAMLocal");
    }

    /**Container's getter for CuxProjectResultVO1
     */
    public CuxProjectResultVOImpl getCuxProjectResultVO1() {
        return (CuxProjectResultVOImpl)findViewObject("CuxProjectResultVO1");
    }

    /**Container's getter for CuxProjectWorkplanResultVO1
     */
    public CuxProjectWorkplanResultVOImpl getCuxProjectWorkplanResultVO1() {
        return (CuxProjectWorkplanResultVOImpl)findViewObject("CuxProjectWorkplanResultVO1");
    }

    /**Container's getter for CuxQualityMagDetailVO1
     */
    public CuxQualityMagDetailVOImpl getCuxQualityMagDetailVO1() {
        return (CuxQualityMagDetailVOImpl)findViewObject("CuxQualityMagDetailVO1");
    }

    public void commit() {
        this.getOADBTransaction().commit();
    }

    public void rollback() {
        this.getOADBTransaction().rollback();
    }

    public void createLineRow() {
        CuxQualityMagDetailVOImpl detailEditVO = 
            this.getCuxQualityMagDetailVO1();

        CuxQualityMagDetailVORowImpl detailEditRow = 
            (CuxQualityMagDetailVORowImpl)detailEditVO.createRow();
        detailEditRow.setDetailId(this.getSequenceValue("cux_quality_mag_detail_s"));
        detailEditRow.setTaskId(this.getEditTaskId());
        detailEditVO.insertRowAtRangeIndex(0, detailEditRow);
    }

    public void initEditPG(Number taskIdNum, Number projectIdNum) {
        CuxEditPGParamterVOImpl paramVO = this.getCuxEditPGParamterVO1();
        paramVO.setWhereClauseParams(null);
        paramVO.setWhereClauseParams(new Object[] { taskIdNum, projectIdNum });
        paramVO.executeQuery();

        CuxQualityMagDetailVOImpl detailEditVO = 
            this.getCuxQualityMagDetailVO1();
        detailEditVO.setWhereClause(null);
        detailEditVO.setWhereClauseParams(null);
        detailEditVO.setWhereClause("task_id = :1");
        detailEditVO.setWhereClauseParams(new Object[] { taskIdNum });
        detailEditVO.executeQuery();
    }


    public void initViewPG(Number taskIdNum, Number projectIdNum) {
        CuxEditPGParamterVOImpl paramVO = this.getCuxEditPGParamterVO2();
        paramVO.setWhereClauseParams(null);
        paramVO.setWhereClauseParams(new Object[] { taskIdNum, projectIdNum });
        paramVO.executeQuery();

        CuxQualityMagDetailViewVOImpl detailViewVO = 
            this.getCuxQualityMagDetailViewVO1();
        detailViewVO.setWhereClause(null);
        detailViewVO.setWhereClauseParams(null);
        detailViewVO.setWhereClause("task_id = :1");
        detailViewVO.setWhereClauseParams(new Object[] { taskIdNum });
        detailViewVO.executeQuery();
    }

    public void initDetailPG(Number projectIdNum) {
        CuxWorkplanDetailPGParamterVOImpl paramVO = 
            this.getCuxWorkplanDetailPGParamterVO1();
        paramVO.setWhereClauseParams(null);
        paramVO.setWhereClauseParams(new Object[] { projectIdNum });
        paramVO.executeQuery();

    }

    /**Container's getter for CuxEditPGParamterVO1
     */
    public CuxEditPGParamterVOImpl getCuxEditPGParamterVO1() {
        return (CuxEditPGParamterVOImpl)findViewObject("CuxEditPGParamterVO1");
    }

    public Number getEditTaskId() {
        CuxEditPGParamterVOImpl paramVO = this.getCuxEditPGParamterVO1();
        CuxEditPGParamterVORowImpl paramRow = 
            (CuxEditPGParamterVORowImpl)paramVO.first();
        return paramRow.getTaskId();
    }

    public Number getEditProjectId() {
        CuxEditPGParamterVOImpl paramVO = this.getCuxEditPGParamterVO1();
        CuxEditPGParamterVORowImpl paramRow = 
            (CuxEditPGParamterVORowImpl)paramVO.first();
        return paramRow.getProjectId();
    }

    public Number getViewTaskId() {
        CuxEditPGParamterVOImpl paramVO = this.getCuxEditPGParamterVO2();
        CuxEditPGParamterVORowImpl paramRow = 
            (CuxEditPGParamterVORowImpl)paramVO.first();
        return paramRow.getTaskId();
    }

    public Number getViewProjectId() {
        CuxEditPGParamterVOImpl paramVO = this.getCuxEditPGParamterVO2();
        CuxEditPGParamterVORowImpl paramRow = 
            (CuxEditPGParamterVORowImpl)paramVO.first();
        return paramRow.getProjectId();
    }


    public Number getDetailProjectId() {
        CuxWorkplanDetailPGParamterVOImpl paramVO = 
            this.getCuxWorkplanDetailPGParamterVO1();
        CuxWorkplanDetailPGParamterVORowImpl paramRow = 
            (CuxWorkplanDetailPGParamterVORowImpl)paramVO.first();
        return paramRow.getProjectId();
    }

    /**Container's getter for CuxQualityMagHeaderVO1
     */
    public CuxQualityMagHeaderVOImpl getCuxQualityMagHeaderVO1() {
        return (CuxQualityMagHeaderVOImpl)findViewObject("CuxQualityMagHeaderVO1");
    }

    public void initCreateHeader() {
        CuxQualityMagHeaderVOImpl headerVO = this.getCuxQualityMagHeaderVO1();
        if (headerVO.isExecuted() && headerVO.getRowCount() == 0) {
            CuxQualityMagHeaderVORowImpl row = 
                (CuxQualityMagHeaderVORowImpl)headerVO.createRow();
            row.setProjectId(this.getDetailProjectId());
            row.setHeaderId(this.getSequenceValue("CUX_QUALITY_MAG_HEADER_S"));
            row.setStatus("新建");
            headerVO.insertRowAtRangeIndex(0, row);
        }
    }

    /**
     * 
     * @param headerId
     */
    public void startWorkFlow(Number headerId) {

        OADBTransaction tx = this.getOADBTransaction();
        CallableStatement cs = 
            tx.createCallableStatement("begin cux_quapl_approval_pkg.start_quapl_process(:1);end;", 
                                       1);
        try {
            cs.setInt(1, headerId.intValue());
            cs.execute();
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (cs != null) {
            try {
                cs.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }


    }

    /**Container's getter for CuxProjectWorkplanForWFVO1
     */
    public CuxProjectWorkplanForWFVOImpl getCuxProjectWorkplanForWFVO1() {
        return (CuxProjectWorkplanForWFVOImpl)findViewObject("CuxProjectWorkplanForWFVO1");
    }

    /**Container's getter for CuxQualityMagDetailForWFVO1
     */
    public CuxQualityMagDetailForWFVOImpl getCuxQualityMagDetailForWFVO1() {
        return (CuxQualityMagDetailForWFVOImpl)findViewObject("CuxQualityMagDetailForWFVO1");
    }

    /**Container's getter for WorkplanToDetail1
     */
    public ViewLinkImpl getWorkplanToDetail1() {
        return (ViewLinkImpl)findViewLink("WorkplanToDetail1");
    }

    /**Container's getter for CuxWorkplanDetailPGParamterVO1
     */
    public CuxWorkplanDetailPGParamterVOImpl getCuxWorkplanDetailPGParamterVO1() {
        return (CuxWorkplanDetailPGParamterVOImpl)findViewObject("CuxWorkplanDetailPGParamterVO1");
    }

    /**Container's getter for CuxQualityMagDetailViewVO1
     */
    public CuxQualityMagDetailViewVOImpl getCuxQualityMagDetailViewVO1() {
        return (CuxQualityMagDetailViewVOImpl)findViewObject("CuxQualityMagDetailViewVO1");
    }

    /**Container's getter for CuxEditPGParamterVO2
     */
    public CuxEditPGParamterVOImpl getCuxEditPGParamterVO2() {
        return (CuxEditPGParamterVOImpl)findViewObject("CuxEditPGParamterVO2");
    }

    /**Container's getter for CuxProjectNameQueryVO1
     */
    public CuxProjectNameQueryVOImpl getCuxProjectNameQueryVO1() {
        return (CuxProjectNameQueryVOImpl)findViewObject("CuxProjectNameQueryVO1");
    }

}
